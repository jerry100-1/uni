(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/enter/enter1"],{3897:function(e,n,t){"use strict";t.r(n);var a=t("fe00"),o=t("fe6f");for(var s in o)"default"!==s&&function(e){t.d(n,e,function(){return o[e]})}(s);t("efb9");var i=t("2877"),c=Object(i["a"])(o["default"],a["a"],a["b"],!1,null,"49e9d8e2",null);n["default"]=c.exports},"9f40":function(e,n,t){},d626:function(e,n,t){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;t("939c");var a=function(){return t.e("components/uni-icon/uni-icon").then(t.bind(null,"0ac5"))},o={components:{uniIcon:a},data:function(){return{marchantId:"",upSrc:"",defSrc:"../../static/capital/my_add_image@2x.png",contactsPhone:"",contactsName:"",shopAddressP:[{proName:""}],pIndex:0,shopAddressC:[{proName:""}],cIndex:0,shopAddressX:[{proName:""}],xIndex:0,companyName:"",shopAddress:"",qq:"",shopName:"",cusNum:"",cusWX:"",cusPhone:"",linepayratio:["8%","15%"],linepayratioIndex:0,front:["需要","不需要"],frontIndex:0,existsShop:1,latitude:"",longitude:"",isFrontArr:["有","无"],isFrontArrIndex:0,marchantType:[{typename:""}],shopIndex:0}},onNavigationBarButtonTap:function(n){e.navigateTo({url:"service"})},methods:{map:function(){var n=this;e.chooseLocation({success:function(t){setTimeout(function(){e.showToast({title:"定位成功",icon:"none"})},200),n.latitude=t.latitude,n.longitude=t.longitude}})},checkUserName:function(e){var n=this;n.$ajax({url:"/channelManagementRest/checkExistsAccountName",data:{accountName:e.detail.value,marchantId:n.marchantId||null},success:function(e){}})},isFrontArrChange:function(e){this.isFrontArrIndex=e.detail.value,1==e.detail.value&&(this.latitude="",this.longitude=""),this.existsShop=1*this.isFrontArrIndex+1},linepayratioChange:function(e){this.linepayratioIndex=e.detail.value},shopAddressPChange:function(e){var n=this;n.pIndex=e.detail.value,n.searchCity()},frontChange:function(e){this.frontIndex=e.detail.value},searchCity:function(e){var n=this;n.$ajax({url:"/shopProduct/getCommonAddressCityList",data:{proCode:n.shopAddressP[n.pIndex].code},success:function(t){if(n.shopAddressC=t,e)for(var a in t)if(e.companyCity==t[a].code){n.cIndex=a;break}n.searchX(e)}})},checkPhone:function(e){return!!/^1[3456789]\d{9}$/.test(e)},searchX:function(e){var n=this;n.$ajax({url:"/shopProduct/getCommonAddressDistrictList",data:{cityCode:n.shopAddressC[n.cIndex].code},success:function(t){if(n.shopAddressX=t,e)for(var a in t)if(e.companyArea==t[a].code){n.xIndex=a;break}}})},shopAddressChange:function(e){var n=this;n.cIndex=e.detail.value,n.searchCity()},shopAddressXChange:function(e){this.xIndex=e.detail.value},url:function(){var n=this;if(n.shopName&&n.cusPhone&&n.cusNum&&n.contactsName&&n.contactsPhone&&n.shopAddress&&n.companyName){if(!n.checkPhone(n.contactsPhone))return void e.showToast({title:"请填写正确的手机号码",icon:"none"});var t={shopName:n.shopName,displayImg:n.upSrc,servicePhone:n.cusPhone,qq:n.qq,weixin:n.cusWX,accountName:n.cusNum||"",contactsName:n.contactsName,contactsPhone:n.contactsPhone,marchantType:n.marchantType[n.shopIndex].marchanttypeid,isFront:1*n.frontIndex+1,companyProvince:n.shopAddressP[n.pIndex].code,proName:n.shopAddressP[n.pIndex].proName,companyCity:n.shopAddressC[n.cIndex].code,cityName:n.shopAddressP[n.pIndex].proName,companyName:n.companyName,companyArea:n.shopAddressX[n.xIndex].code,areaName:n.shopAddressP[n.pIndex].disName,address:n.shopAddress,linePayRatio:0==n.linepayratioIndex?80:150,existsShop:n.existsShop,latitude:n.latitude,longitude:n.longitude};t=JSON.stringify(t),e.navigateTo({url:"enter2?obj="+t+"&marchantId="+n.marchantId})}else e.showToast({title:"请填写完整的信息",icon:"none"})},limit:function(e){var n="";n=(e/1048576).toFixed(2);var t=n+"",a=t.indexOf("."),o=t.substr(a+1,2);return"00"==o?t.substring(0,a)+t.substr(a+3,2):n},proImgsChoose:function(){var n=this;e.chooseImage({count:1,sizeType:["original","compressed"],success:function(t){console.log(n.limit(t.tempFiles[0].size)," at pages\\enter\\enter1.vue:326"),n.limit(t.tempFiles[0].size)>1?e.showToast({title:"图片大小不能超过1M",icon:"none"}):n.$ajax({uploadFile:!0,formData:{fileName:"/marchant/"},filePath:t.tempFilePaths[0],success:function(e){n.upSrc=e}})}})},shopChange:function(e){this.shopIndex=e.detail.value},ProvinceList:function(e){var n=this;n.$ajax({url:"/shopProduct/getCommonAddressProvinceList",success:function(t){if(n.shopAddressP=t,e)for(var a in t)if(e.companyProvince==t[a].code){n.pIndex=a;break}n.searchCity(e)}})},typeMapper:function(e){var n=this;n.$ajax({url:"/channelManagementRest/getSelectMarchantTypeMapper",success:function(t){if(n.marchantType=t,e)for(var a in t)if(e==t[a].marchanttypeid){n.shopIndex=a;break}}})}},onLoad:function(e){e.id&&(this.marchantId=e.id);var n=this;n.marchantId?n.$ajax({url:"/channelManagementRest/getSelectMarchantInfo",data:{marchantId:n.marchantId},success:function(e){n.shopName=e.shopName,n.upSrc=e.displayImg,n.cusPhone=e.servicePhone,n.qq=e.qq,n.cusWX=e.weixin,n.cusNum=e.accountName||"",n.companyName=e.companyName,n.shopAddress=e.address,n.contactsName=e.contactsName,n.contactsPhone=e.contactsPhone,n.frontIndex=1*e.isFront-1,n.existsShop=e.existsShop||0,n.latitude=e.latitude||"",n.longitude=e.longitude||"",n.linepayratioIndex=80==e.linePayRatio?0:1,n.typeMapper(e.marchantType),n.ProvinceList(e)}}):(n.typeMapper(),n.ProvinceList())}};n.default=o}).call(this,t("6e42")["default"])},efb9:function(e,n,t){"use strict";var a=t("9f40"),o=t.n(a);o.a},fe00:function(e,n,t){"use strict";var a=function(){var e=this,n=e.$createElement;e._self._c},o=[];t.d(n,"a",function(){return a}),t.d(n,"b",function(){return o})},fe6f:function(e,n,t){"use strict";t.r(n);var a=t("d626"),o=t.n(a);for(var s in a)"default"!==s&&function(e){t.d(n,e,function(){return a[e]})}(s);n["default"]=o.a}},[["8797","common/runtime","common/vendor"]]]);