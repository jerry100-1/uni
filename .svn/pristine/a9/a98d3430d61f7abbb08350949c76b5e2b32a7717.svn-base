(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/pro/index"],{6479:function(o,t,s){"use strict";var e=function(){var o=this,t=o.$createElement;o._self._c},i=[];s.d(t,"a",function(){return e}),s.d(t,"b",function(){return i})},"69d7":function(o,t,s){"use strict";(function(o){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=function(){return s.e("components/uni-load-more/uni-load-more").then(s.bind(null,"1294"))},i=function(){return s.e("components/uni-popup/uni-popup").then(s.bind(null,"3324"))},n={components:{uniLoadMore:e,uniPopup:i},data:function(){return{shopObj:{},isReason:!1,Reason:"",isSales:!1,reason:"",selesNum:"",type:1,status:"loading",delState:1,delIsShow:!1,stockShow:!1,stockNum:"",shareShow:!1,statusArr:["","出售中","待审核","已售罄","已下架","查看原因","已撤销"],showPopupBottomShare:!1,proList:[],proStatus:"",bottomData:[{src:"../../static/shareImg/info_weibo@2x.png",text:"微博"},{src:"../../static/shareImg/info_wechat@2x.png",text:"微信"},{src:"../../static/shareImg/info_friends@2x.png",text:"朋友圈"}],pageNo:1,proId:"",pageAll:2,productMonthSaleSum:""}},methods:{seeReason:function(o){if(console.log(o," at pages\\pro\\index.vue:253"),o){var t=this;t.isReason=!t.isReason,t.Reason=o}},isSalesChange:function(o,t){this.selesNum="",o?(this.productMonthSaleSum=t,this.proId=o):this.proId="",this.isSales=!this.isSales},sales:function(){var t=this;t.selesNum?t.$ajax({url:"/shopProduct/updateShopProductIsOnSale",data:{isOnSale:7,productId:t.proId,shopId:t.shopObj.shopId,sumStock:t.selesNum},success:function(s){t.isSales=!t.isSales,o.showToast({title:"修改成功",icon:"none"})}}):o.showToast({title:"请输入要修改的月销量",icon:none})},delStateChange:function(o,t,s){this.delState=o,this.proId=t,this.proStatus=s,this.delIsShow=!this.delIsShow},stock:function(o){this.proId=o,this.stockShow=!this.stockShow},hidePopup:function(o){this.showPopupBottomShare=!this.showPopupBottomShare,o&&(this.proId=o)},seePro:function(t){o.navigateTo({url:"/pages/pro/proSee?productId="+t})},shareFun:function(t){var s=this,e=1*t.currentTarget.dataset.index,i="",n="",a="",r="http://www.hnlxyj.com/wx/html/mall/details.html?id="+s.proId;for(var u in s.proList)if(s.proId==s.proList[u].productId){i=s.proList[u].productImg,a=s.proList[u].productName;break}switch(e){case 0:o.share({provider:"sinaweibo",type:0,href:r||"",title:n||"",summary:a||"",imageUrl:i||"",success:function(o){console.log("success:"+JSON.stringify(o)," at pages\\pro\\index.vue:350")},fail:function(t){o.showToast({title:"请安装微博后再分享",icon:"none"}),console.log("fail:"+JSON.stringify(t)," at pages\\pro\\index.vue:357")}});break;case 1:o.share({provider:"weixin",scene:"WXSceneSession",type:0,href:r||"",title:n||"",summary:a||"",imageUrl:i||"",success:function(o){console.log("success:"+JSON.stringify(o)," at pages\\pro\\index.vue:372")},fail:function(t){o.showToast({title:"请安装微信后再分享",icon:"none"}),console.log("fail:"+JSON.stringify(t)," at pages\\pro\\index.vue:379")}});break;case 2:o.share({provider:"weixin",scene:"WXSenceTimeline",type:0,href:r,title:n,summary:a,imageUrl:i,success:function(o){console.log("success:"+JSON.stringify(o)," at pages\\pro\\index.vue:394")},fail:function(t){o.showToast({title:"请安装微信后再分享",icon:"none"}),console.log("fail:"+JSON.stringify(t)," at pages\\pro\\index.vue:401")}});break;case 3:o.share({provider:"qq",type:3,href:r,title:n,summary:a,imageUrl:i,success:function(o){console.log("success:"+JSON.stringify(o)," at pages\\pro\\index.vue:415")},fail:function(o){console.log("fail:"+JSON.stringify(o)," at pages\\pro\\index.vue:418")}});break;case 4:o.share({provider:"qq",type:3,href:r,title:n,summary:a,imageUrl:i,success:function(o){console.log("success:"+JSON.stringify(o)," at pages\\pro\\index.vue:432")},fail:function(o){console.log("fail:"+JSON.stringify(o)," at pages\\pro\\index.vue:435")}});break}},commit:function(){var t=this;1==t.delState?(t.proStatusFun(t.proStatus,t.proId),this.delIsShow=!this.delIsShow):t.$ajax({url:"/shopProduct/deleteShopduct",method:"POST",data:{productId:t.proId},success:function(s){for(var e in t.delIsShow=!t.delIsShow,t.proList)if(t.proId==t.proList[e].productId){t.proList.splice(e,1);break}o.showToast({title:"删除成功",icon:"none"})}})},proStatusFun:function(o,t){var s=this;this.$ajax({url:"/shopProduct/updateShopProductIsOnSale",method:"POST",data:{isOnSale:o,productId:t,shopId:s.shopObj.shopId},success:function(o){for(var e in s.proList)t==s.proList[e].productId&&(s.proList[e].isOnSale=o.isOnSale)}})},commitStock:function(){var o=this;this.stockShow=!this.stockShow,this.$ajax({url:"/shopProduct/updateShopProductsumStock",method:"POST",data:{productId:o.proId,sumStock:o.stockNum},success:function(t){for(var s in o.proList)if(o.proId==o.proList[s].productId)return o.proList[s].sumStock=t.sumStock,o.proList[s].isOnSale=t.isOnSale,!1}})},init:function(o){this.type=o,this.pageNo=1,this.pageAll=2,this.status="loading",this.search()},search:function(){var o=this;o.pageNo<=o.pageAll&&this.$ajax({url:"/shopProduct/selectShopProduct",method:"POST",data:{shopId:o.shopObj.shopId,type:o.type,pageNo:o.pageNo},success:function(t){if(o.pageNo=1*o.pageNo+1,o.pageAll=t.totalPage,2==o.pageNo)o.proList=t.lists||[];else{o.proList;o.proList=o.proList.concat(t.lists)}o.pageNo>o.pageAll&&(o.status="noMore")}})},edit:function(t){o.navigateTo({url:"/pages/pro/proAdd?proId="+t})}},onReachBottom:function(){this.search()},onLoad:function(){var t=this;o.getStorage({key:"shopObj",success:function(o){t.shopObj=JSON.parse(o.data)}})},onShow:function(){this.init(1)},onNavigationBarButtonTap:function(t){o.navigateTo({url:"/pages/pro/proAdd"})}};t.default=n}).call(this,s("6e42")["default"])},"6c37":function(o,t,s){"use strict";s.r(t);var e=s("6479"),i=s("891f");for(var n in i)"default"!==n&&function(o){s.d(t,o,function(){return i[o]})}(n);s("b07b");var a=s("2877"),r=Object(a["a"])(i["default"],e["a"],e["b"],!1,null,"26c1b2d4",null);t["default"]=r.exports},"861e":function(o,t,s){},"891f":function(o,t,s){"use strict";s.r(t);var e=s("69d7"),i=s.n(e);for(var n in e)"default"!==n&&function(o){s.d(t,o,function(){return e[o]})}(n);t["default"]=i.a},b07b:function(o,t,s){"use strict";var e=s("861e"),i=s.n(e);i.a}},[["7e37","common/runtime","common/vendor"]]]);