(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/enter/enter2"],{"625a":function(e,a,n){"use strict";var t=n("c36c"),o=n.n(t);o.a},7037:function(e,a,n){"use strict";(function(e){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;n("939c");var t={data:function(){return{marchantId:null,prevObj:{},bank:[],bankIndex:0,takeP:[{proName:""}],tpIndex:0,takeC:[{proName:""}],tcIndex:0,takeX:[{proName:""}],txIndex:0,bankP:[{proName:""}],bpIndex:0,bankC:[{proName:""}],bpCndex:0,takeContactsName:"",takeAddress:"",takeContactsPhone:"",businessLicence:"",bSrc:"http://www.hnlxyj.com/wx/image/my/my_join_business_licence@2x.png",idCardB:"",ibSrc:"http://www.hnlxyj.com/wx/image/my/my_join_idback@2x.png",idCardA:"",iaSrc:"http://www.hnlxyj.com/wx/image/my/my_join_idside@2x.png",societyId:"",bankEnrollName:"",mainBankNum:"",bankName:"",checkNote:"",isCheck:!1,shopObj:{}}},onNavigationBarButtonTap:function(a){e.navigateTo({url:"service"})},methods:{chooseLocation:function(){e.chooseLocation({success:function(e){console.log("位置名称："+e.name," at pages\\enter\\enter2.vue:144"),console.log("详细地址："+e.address," at pages\\enter\\enter2.vue:145"),console.log("纬度："+e.latitude," at pages\\enter\\enter2.vue:146"),console.log("经度："+e.longitude," at pages\\enter\\enter2.vue:147")}})},provinceList:function(e){var a=this;a.$ajax({url:"/shopProduct/getCommonAddressProvinceList",success:function(n){if(a.takeP=n,a.bankP=n,e)for(var t in n)e.bankProvince==n[t].code&&(a.bpIndex=t,console.log(t," at pages\\enter\\enter2.vue:162"),a.searchCity(1,"",e)),e.takeProvince==n[t].code&&(a.tpIndex=t,console.log(t," at pages\\enter\\enter2.vue:167"),a.searchCity(2,"",e));else a.searchCity()}})},checkPhone:function(e){return!!/^1[3456789]\d{9}$/.test(e)},save:function(){var a=this;if(a.isCheck)if(a.businessLicence&&a.idCardA&&a.idCardB&&a.societyId&&a.bankEnrollName&&a.mainBankNum&&a.bankName&&a.takeAddress&&a.takeContactsName&&a.takeContactsPhone){if(!a.checkPhone(a.takeContactsPhone))return void e.showToast({title:"请填写正确的手机号码",icon:"none"});var n={accountName:a.prevObj.accountName,address:a.prevObj.address,bankCity:a.bankC[a.bpCndex].code,bankEnrollName:a.bankEnrollName,bankName:a.bankName,bankProvince:a.bankP[a.bpIndex].code,businessLicence:a.businessLicence,checkNote:a.checkNote,companyArea:a.prevObj.companyArea,companyCity:a.prevObj.companyCity,companyName:a.prevObj.companyName,companyProvince:a.prevObj.companyProvince,contactsName:a.prevObj.contactsName,contactsPhone:a.prevObj.contactsPhone,existsShop:a.prevObj.existsShop,latitude:a.prevObj.latitude,longitude:a.prevObj.longitude,displayImg:a.prevObj.displayImg,idCardA:a.idCardA,idCardB:a.idCardB,isFront:a.prevObj.isFront,linePayRatio:a.prevObj.linePayRatio,mainBankNum:a.mainBankNum,id:a.shopObj.merchantId,marchantId:a.marchantId,marchantType:a.prevObj.marchantType,qq:a.prevObj.qq,servicePhone:a.prevObj.servicePhone,shopName:a.prevObj.shopName,societyId:a.societyId,takeAddress:a.takeAddress,takeArea:a.takeX[a.txIndex].code,takeCity:a.takeC[a.tcIndex].code,takeContactsName:a.takeContactsName,takeContactsPhone:a.takeContactsPhone,takeProvince:a.takeP[a.tpIndex].code,weixin:a.prevObj.weixin,level:a.shopObj.level};a.$ajax({url:"/channelManagementRest/addOrUpdateMarchantInfo",data:n,success:function(n){var t="申请成功";a.marchantId&&(t="修改成功"),e.showToast({title:t,icon:"none"}),setTimeout(function(){e.navigateBack({delta:2})},2e3)}})}else e.showToast({title:"请填写完整的信息",icon:"none"});else e.showToast({title:"请同意协议"})},bankPChange:function(e){this.bpIndex=e.detail.value,this.searchCity(1)},bankChange:function(e){this.bpCndex=e.detail.value},takePChange:function(e){this.tpIndex=e.detail.value,this.searchCity(2)},takeCChange:function(e){this.tcIndex=e.detail.value},takeXChange:function(e){this.txIndex=e.detail.value},searchCity:function(e,a,n){var t=this,o="";o=1==e?t.bankP[t.bpIndex].code:t.takeP[t.tpIndex].code,t.$ajax({url:"/shopProduct/getCommonAddressCityList",data:{proCode:o},success:function(o){if(a)for(var c in o)t.prevObj.companyCity==o[c].code&&(t.tcIndex=c);if(n)for(var i in console.log("obj",o," at pages\\enter\\enter2.vue:309"),o)n.takeCity==o[i].code&&(t.tcIndex=i),n.bankCity==o[i].code&&(t.bpCndex=i);1==e?t.bankC=o:2==e?(t.takeC=o,t.searchX(a,n)):(t.bankC=o,t.takeC=o,t.searchX(a,n))}})},searchX:function(e,a){var n=this;n.$ajax({url:"/shopProduct/getCommonAddressDistrictList",data:{cityCode:n.takeC[n.tcIndex].code},success:function(t){if(n.takeX=t,e)for(var o in t)n.prevObj.companyArea==t[o].code&&(n.txIndex=o);if(a)for(var c in t)a.takeArea==t[c].code&&(n.txIndex=c)}})},voluation:function(){var e=this;for(var a in console.log(e.prevObj," at pages\\enter\\enter2.vue:363"),e.takeP)e.prevObj.companyProvince==e.takeP[a].code&&(e.tpIndex=a,e.takeContactsName=e.prevObj.contactsName,e.takeAddress=e.prevObj.address,e.takeContactsPhone=e.prevObj.contactsPhone,e.searchCity(2,1))},checkboxChange:function(e){e.detail.value.length>0?this.isCheck=!0:this.isCheck=!1},limit:function(e){var a="";a=(e/1048576).toFixed(2);var n=a+"",t=n.indexOf("."),o=n.substr(t+1,2);return"00"==o?n.substring(0,t)+n.substr(t+3,2):a},proImgsChoose:function(a){var n=this;e.chooseImage({count:1,sizeType:["original","compressed"],success:function(t){n.limit(t.tempFiles[0].size)>1?e.showToast({title:"图片大小不能超过1M",icon:"none"}):n.$ajax({uploadFile:!0,formData:{fileName:"/marchant/"},filePath:t.tempFilePaths[0],success:function(e){1==a?n.businessLicence=e:2==a?n.idCardB=e:n.idCardA=e}})}})},uploadImg:function(e,a){var n=this;n.$ajax({url:"/commonUpload/upload",method:"POST",data:{base64Img:e,fileName:"/marchant/",artworkMaster:1},success:function(e){1==a?n.businessLicence=e:2==a?n.idCardB=e:n.idCardA=e}})},url:function(){return console.log(0," at pages\\enter\\enter2.vue:456"),e.navigateTo({url:"web_view"}),!1}},onLoad:function(a){var n=this,t=JSON.parse(a.obj);e.getStorage({key:"shopObj",success:function(e){n.shopObj=JSON.parse(e.data)}}),this.prevObj=t,a.marchantId?(n.marchantId=a.marchantId,n.$ajax({url:"/channelManagementRest/getSelectMarchantInfo",data:{marchantId:n.marchantId},success:function(e){n.businessLicence=e.businessLicence,n.idCardB=e.idCardB,n.idCardA=e.idCardA,n.societyId=e.societyId,n.bankEnrollName=e.bankEnrollName,n.mainBankNum=e.mainBankNum,n.bankName=e.bankName,n.takeAddress=e.takeAddress,n.takeContactsName=e.takeContactsName,n.takeContactsPhone=e.takeContactsPhone,n.checkNote=e.checkNote,n.provinceList(e)}})):n.provinceList()}};a.default=t}).call(this,n("6e42")["default"])},"81b2":function(e,a,n){"use strict";n.r(a);var t=n("7037"),o=n.n(t);for(var c in t)"default"!==c&&function(e){n.d(a,e,function(){return t[e]})}(c);a["default"]=o.a},be2e:function(e,a,n){"use strict";var t=function(){var e=this,a=e.$createElement;e._self._c},o=[];n.d(a,"a",function(){return t}),n.d(a,"b",function(){return o})},c36c:function(e,a,n){},e414:function(e,a,n){"use strict";n.r(a);var t=n("be2e"),o=n("81b2");for(var c in o)"default"!==c&&function(e){n.d(a,e,function(){return o[e]})}(c);n("625a");var i=n("2877"),s=Object(i["a"])(o["default"],t["a"],t["b"],!1,null,"55cedfe2",null);a["default"]=s.exports}},[["aeba","common/runtime","common/vendor"]]]);